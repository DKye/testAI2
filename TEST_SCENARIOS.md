# 测试场景：最大效率点标记与表格高亮

## 场景1：基础显示
**步骤：**
1. 打开 index.html
2. 使用默认示例数据

**预期：**
- ✓ 图例中只显示"示例曲线"，不显示"示例曲线 - 最大效率"
- ✓ 图上显示一个较大的圆形标记点，颜色与曲线一致（红色），有黑/白边框
- ✓ 数据表中的某一行有金色背景高亮，该行开头有⭐
- ✓ 最大效率汇总表显示最大效率和对应功率

## 场景2：添加数据测试
**步骤：**
1. 在示例曲线中添加一个效率更高的点（例如：功率=45, 效率=98.5）
2. 观察变化

**预期：**
- ✓ 图上标记点移动到新的最大效率点
- ✓ 数据表中高亮自动移到新增的点所在行
- ✓ 汇总表更新显示新的最大效率值

## 场景3：并列最大值测试
**步骤：**
1. 添加多个效率相同的点：
   - 功率=30, 效率=98.0
   - 功率=40, 效率=98.0
   - 功率=50, 效率=98.0
2. 观察哪个被标记

**预期：**
- ✓ 图上标记在功率=30的点（最小功率）
- ✓ 数据表中高亮功率=30的行

## 场景4：删除数据测试
**步骤：**
1. 删除当前的最大效率点
2. 观察变化

**预期：**
- ✓ 标记自动移到次大效率点
- ✓ 数据表高亮自动更新
- ✓ 汇总表更新

## 场景5：清空数据测试
**步骤：**
1. 点击"清空数据"按钮

**预期：**
- ✓ 图上标记消失
- ✓ 数据表高亮消失
- ✓ 汇总表显示 "-"

## 场景6：开关控制测试
**步骤：**
1. 取消勾选"标记最大效率点"
2. 重新勾选

**预期：**
- ✓ 取消勾选时，图上标记消失
- ✓ 取消勾选时，数据表高亮仍然显示
- ✓ 重新勾选时，图上标记重新出现

## 场景7：曲线显隐测试
**步骤：**
1. 取消勾选曲线的显示复选框
2. 重新勾选

**预期：**
- ✓ 隐藏时，图上标记消失
- ✓ 隐藏时，数据表高亮保持显示
- ✓ 显示时，图上标记重新出现

## 场景8：颜色变更测试
**步骤：**
1. 修改曲线颜色（例如从红色改为蓝色）

**预期：**
- ✓ 图上标记的核心颜色跟随变为蓝色
- ✓ 边框仍然是对比色（黑/白）
- ✓ 数据表高亮不变

## 场景9：多曲线测试
**步骤：**
1. 添加第二条曲线
2. 为第二条曲线输入数据
3. 勾选第二条曲线的显示

**预期：**
- ✓ 图上显示两个标记点，颜色各自对应曲线
- ✓ 两个数据表中各自有高亮行
- ✓ 汇总表显示两条曲线的最大效率
- ✓ 图例只显示两条曲线名称，不显示最大效率点

## 场景10：主题切换测试
**步骤：**
1. 点击"切换主题"按钮
2. 在深色和浅色之间切换

**预期：**
- ✓ 浅色模式：标记黑边框，表格金色背景适中
- ✓ 深色模式：标记白边框，表格金色背景较浅
- ✓ 切换流畅，所有元素颜色正确

## 场景11：导出导入配置测试
**步骤：**
1. 设置一些数据和关闭"标记最大效率点"开关
2. 导出配置JSON
3. 刷新页面
4. 导入刚才导出的JSON

**预期：**
- ✓ 数据完整恢复
- ✓ 开关状态恢复为关闭
- ✓ 表格高亮正确显示

## 场景12：批量粘贴测试
**步骤：**
1. 在"批量粘贴数据"区域粘贴：
   ```
   10 90.0
   20 95.0
   30 97.0
   40 98.5
   50 98.0
   ```
2. 点击"解析并添加"

**预期：**
- ✓ 所有点正确添加
- ✓ 功率=40的点被标记（效率98.5最高）
- ✓ 数据表中该行高亮
- ✓ 点按功率排序显示

## 场景13：悬浮提示测试
**步骤：**
1. 鼠标悬停在最大效率点标记上

**预期：**
- ✓ 显示工具提示
- ✓ 包含"⭐"符号
- ✓ 显示完整信息：曲线名、功率、效率

## 场景14：导出PNG测试
**步骤：**
1. 点击"导出PNG"

**预期：**
- ✓ 下载PNG文件
- ✓ 图片中包含正确的标记点
- ✓ 标记颜色与曲线一致
- ✓ 图例中不包含最大效率点项

## 场景15：导出SVG测试
**步骤：**
1. 点击"导出SVG"

**预期：**
- ✓ 下载SVG文件
- ✓ 与PNG相同的显示效果

## 关键验证点总结

### 必须通过的核心验证
1. ✅ 图例不显示最大效率点
2. ✅ 标记颜色与曲线一致（不是金色）
3. ✅ 标记有对比边框
4. ✅ 数据表正确高亮
5. ✅ 并列时选功率最小
6. ✅ 数据变化自动更新
7. ✅ 隐藏曲线时表格仍高亮
8. ✅ 开关控制图上标记
9. ✅ 配置可导入导出
10. ✅ 主题适配正确

### 可选但推荐的验证
- 多曲线场景正确
- 极端数据量测试（100+点）
- 浏览器兼容性测试
- 响应式布局测试
